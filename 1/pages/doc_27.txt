Редактирование   Википедия
Редактирование 
Перейти к навигации
Перейти к поиску
Стабильная версия
 была 
проверена
 
 октября 
 
 изменений
 ожидают проверки
Внимание 
некоторые
 из ожидающих проверки изменений относятся к редактируемой вами части страницы
 
показать эти изменения
 
Вы не представились системе
 Ваш адрес 
будет записан
 в 
историю изменений этой страницы
 Если вы 
представитесь системе
 или 
создадите учётную запись
 вы сможете скрыть 
адрес
 и пользоваться другими 
преимуществами
 Сообщения отправленные на ваш  можно посмотреть на 
вашей странице обсуждения
Пожалуйста не сохраняйте тестовые правки 
используйте для них песочницу
Размер этой страницы  
 КБ
   байт
Правка не может быть 
отменена
 изза несовместимости промежуточных изменений
Антиспам проверка
Не
 заполняйте это
Карточка протокола
 Аббр           
 Название         
 Уровень        Транспортный
 Семейство      
 Спецификация     сентябрь  года   
 Реализации       ядро  
 Расширяемость  Опции
     протокол управления передачей  один из основных Протокол передачи данныхпротоколов Передача данныхпередачи данных интернета Пакеты в  называются сегментами
В стеке протоколов  выполняет функции Транспортный уровеньтранспортного уровня Сетевая модель модели 
Механизм  предоставляет поток данных с предварительной установкой соединения осуществляет повторный запрос данных в случае потери данных и устраняет дублирование при получении двух копий одного пакета гарантируя тем самым в отличие от  целостность передаваемых данных и уведомление отправителя о результатах передачи
Реализации  обычно встроены в Ядро операционной системыядра Операционная системаОС Существуют реализации  работающие в Пространство пользователяпространстве пользователя
 Заголовок сегмента  
   
 Структура заголовка
 
   Бит
     
     
     
     
 
 
 Порт источника   
 Порт назначения  
 
 
 Порядковый номер   
 
 
 Номер подтверждения    
 
 
 Длина заголовка  
 Зарезервировано
 Флаги
 Размер Окна  
 
 
 Контрольная сумма 
 Указатель важности  
 
 
  Опции необязательное но используется практически всегда
 
 
   Данные
 Порт источника Порт назначения 
Эти битные поля содержат номера Порт портов  числа которые определяются по Список портов  и специальному списку
Порт источника идентифицирует приложение клиента с которого отправлены пакеты Ответные данные передаются клиенту на основании этого номера
Порт назначения идентифицирует порт на который отправлен пакет
 Порядковый номер 
   бита  измеряется в байтах и каждый переданный байт полезных данных  увеличивает это значение на 
Если установлен флаг  идёт установление сессии то поле содержит изначальный порядковый номер      В целях безопасности это значение генерируется случайным образом и может быть равно от  до   Первый байт полезных данных в устанавливающейся сессии будет иметь номер 
В противном случае если  не установлен первый байт данных передаваемый в данном пакете имеет этот порядковый номер
Поскольку поток  в общем случае может быть длиннее чем число различных состояний этого поля то все операции с порядковым номером должны выполняться по модулю  Это накладывает практическое ограничение на использование  Если скорость передачи коммуникационной системы такова чтобы в течение  максимального времени жизни сегмента произошло переполнение порядкового номера то в сети может появиться два сегмента с одинаковым номером относящихся к разным частям потока и приёмник получит некорректные данные
 Номер подтверждения 
     бита  если установлен флаг  то это поле содержит порядковый номер октета который отправитель данного сегмента желает получить Это означает что все предыдущие октеты с номерами от  до  включительно были успешно получены
Каждая сторона подсчитывает свой   для переданных данных и отдельно   для полученных данных   каждой из сторон соответствует   другой стороны
 Длина заголовка смещение данных 
Длина заголовка   занимает  бита и указывает значение длины заголовка измеренное в битовых Машинное словословах Минимальный размер составляет  байт пять битовых Машинное словослов а максимальный   байт пятнадцать битовых Машинное словослов Длина заголовка определяет смещение полезных данных относительно начала сегмента Например   равное  говорит о том что заголовок занимает пятнадцать битных Машинное словослова  строк бита в каждой строке бит   байт
 Зарезервировано 
Зарезервировано  бита для будущего использования и должно устанавливаться в ноль
 Флаги управляющие биты 
Это поле содержит  битовых флагов
    Устойчивый механизм сигнализации насыщения с помощью   
      Поле Окно перегрузки уменьшено  флаг установлен отправителем чтобы указать что получен пакет с установленным флагом   
    Поле Эхо   указывает что данный узел способен на  явное уведомление перегрузки и для указания отправителю о перегрузках в сети  
   поле Указатель важности задействовано      Когда узел отправляет сегмент с  флагом то узелполучатель принимает его на отдельном канале
   поле Номер подтверждения задействовано    
     инструктирует получателя протолкнуть данные накопившиеся в приёмном буфере в приложение пользователя  для установки  флага нет Обычно он устанавливается ядром когда оно очищает буфер Дело в том что когда узел отправляет информацию  сохраняет её в буфере и не передает её сразу другому узлу ожидая захочет ли узелотправитель передать ещё Такая же схема работает и у узлаполучателя Когда он получает информацию  сохраняет её в буфере чтобы не тревожить приложение изза каждого байта полученной информации Если узел отправляет сегмент с  флагом это значит что он отправил все что было нужно
   оборвать соединения сбросить буфер очистка буфера   
   синхронизация номеров последовательности   
   бит  флаг будучи установлен указывает на завершение соединения      
 Размер окна 
  самостоятельно определяет количество байт данных  после передачи которых отправитель ожидает подтверждения от получателя что данные получены Иначе говоря получатель пакета располагает для приёма данных буфером длиной размер окна байт
По умолчанию размер окна измеряется в байтах поэтому ограничен   байтами Однако благодаря  опции    этот размер может быть увеличен до  Гбайта Чтобы задействовать эту опцию обе стороны должны согласовать это в своих  сегментах
 Контрольная сумма  
                        
                                                                              
                                            
                    
Поле контрольной суммы  это битное дополнение к сумме всех битных Машинное словослов заголовка включая псевдозаголовок и данных Если сегмент по которому вычисляется контрольная сумма имеет длину не кратную битам то длина сегмента увеличивается до кратной ти за счёт добавления к нему справа нулевых битов заполнения Биты заполнения  не передаются в сообщении и служат только для расчёта контрольной суммы При расчёте контрольной суммы значение самого поля контрольной суммы принимается равным 
 Указатель важности   
                       
                                         
битовое значение положительного смещения от порядкового номера в данном сегменте Это поле указывает порядковый номер октета которым заканчиваются важные  данные Поле принимается во внимание только для пакетов с установленным флагом  Используется для Внеполосные данныевнеполосных данных
 Опции 
Могут применяться в некоторых случаях для расширения протокола Иногда используются для тестирования На данный момент в опции практически всегда включают  байта  в данном случае  и  байт задающих  Вычислить длину поля опции можно через значение поля смещения
 Механизм действия протокола 
В отличие от традиционной альтернативы   который может сразу же начать передачу пакетов  устанавливает соединения которые должны быть созданы перед передачей данных соединение можно разделить на  стадии
 Установка соединения
 Передача данных
 Завершение соединения
 Состояния сеанса  
Файл   Упрощённая диаграмма состояний  Более подробно в      на английском языке
   
  Состояния сеанса 
Начальное состояние узла Фактически фиктивное
Сервер ожидает запросов установления соединения от клиента
Клиент отправил запрос серверу на установление соединения и ожидает ответа
Сервер получил запрос на соединение отправил ответный запрос и ожидает подтверждения
Соединение установлено идёт передача данных
Одна из сторон назовём её узел завершает соединение отправив сегмент с флагом 
Другая сторона узел переходит в это состояние отправив в свою очередь сегмент  и продолжает одностороннюю передачу
Узел получает  продолжает чтение и ждёт получения сегмента с флагом 
Узел заканчивает передачу и отправляет сегмент с флагом 
Узел получил сегмент с флагом  отправил сегмент с флагом  и ждёт  секунд перед окончательным закрытием соединения
Обе стороны инициировали закрытие соединения одновременно после отправки сегмента с флагом  узел также получает сегмент  отправляет  и находится в ожидании сегмента  подтверждения на свой запрос о разъединении
 Установка соединения 
Процесс начала сеанса  также называемый рукопожатие  состоит из трёх шагов
 Клиент который намеревается установить соединение посылает серверу сегмент с номером последовательности и флагом 
 Сервер получает сегмент запоминает номер последовательности и пытается создать сокет буфера и управляющие структуры памяти для обслуживания нового клиента
 В случае успеха сервер посылает клиенту сегмент с номером последовательности и флагами  и  и переходит в состояние 
 В случае неудачи сервер посылает клиенту сегмент с флагом 
 Если клиент получает сегмент с флагом  то он запоминает номер последовательности и посылает сегмент с флагом 
 Если клиент одновременно получает и флаг  что обычно и происходит то он переходит в состояние 
 Если клиент получает сегмент с флагом  то он прекращает попытки соединиться
 Если клиент не получает ответа в течение  секунд то он повторяет процесс соединения заново
 Если сервер в состоянии  получает сегмент с флагом  то он переходит в состояние 
 В противном случае после таймаута он закрывает сокет и переходит в состояние 
Процесс называется трёхэтапным рукопожатием    так как несмотря на то что возможен процесс установления соединения с использованием четырёх сегментов  в сторону сервера  в сторону клиента  в сторону клиента  в сторону сервера на практике для экономии времени используется три сегмента
Пример базового этапного согласования
                                                       
                                                     
                           
           
               
               
В строке    начинает передачу сегмента  говорящего об использовании номеров последовательности начиная со 
В строке    передаёт  и подтверждение для принятого  в адрес   Поле подтверждения показывает ожидание   приёма номера последовательности  подтверждающего  с номером 
В строке    отвечает пустым сегментом с подтверждением  для сегмента  от  
В строке    передаёт некоторые данные Отметим что номер подтверждения сегмента в строке   совпадает с номером последовательности в строке   поскольку  не занимает пространства номеров последовательности если это сделать придётся подтверждать подтверждения   для 
Существуют экспериментальные расширения протокола  сокращающие количество пакетов при установлении соединения например        Ранее также существовало расширение  Для прозрачного шифрования данных предлагается использовать расширение 
 Передача данных 
Алгоритм НейглаМедленный старт
При обмене данными приёмник использует номер последовательности содержащийся в получаемых сегментах для восстановления их исходного порядка Приёмник уведомляет передающую сторону о номере последовательности до которой он успешно получил данные включая его в поле номер подтверждения
Все получаемые данные относящиеся к промежутку подтверждённых последовательностей игнорируются Если полученный сегмент содержит номер последовательности больший чем ожидаемый то данные из сегмента буферизируются но номер подтверждённой последовательности не изменяется Если впоследствии будет принят сегмент относящийся к ожидаемому номеру последовательности то порядок данных будет автоматически восстановлен исходя из номеров последовательностей в сегментах
Для того чтобы передающая сторона не отправляла данные интенсивнее чем их может обработать приёмник  содержит средства управления потоком Для этого используется поле окно В сегментах направляемых от приёмника передающей стороне в поле окно указывается текущий размер приёмного буфера Передающая сторона сохраняет размер окна и отправляет данных не более чем указал приёмник Если приёмник указал нулевой размер окна то передачи данных в направлении этого узла не происходит пока приёмник не сообщит о большем размере окна
В некоторых случаях передающее приложение может явно затребовать передать данные до некоторой последовательности принимающему приложению не буферизируя их Для этого используется флаг  Если в полученном сегменте обнаруживается флаг  то реализация  отдаёт все буферизированные на текущий момент данные принимающему приложению Проталкивание используется например в интерактивных приложениях В сетевых терминалах нет смысла ожидать ввода пользователя после того как он закончил набирать команду Поэтому последний сегмент содержащий команду обязан содержать флаг  чтобы приложение на принимающей стороне смогло начать её выполнение
 Завершение соединения 
Завершение соединения можно рассмотреть в три этапа
 Посылка серверу от клиента флага  на завершение соединения
 Сервер посылает клиенту флаги ответа    что соединение закрыто
 После получения этих флагов клиент закрывает соединение и в подтверждение отправляет серверу   что соединение закрыто
 Известные проблемы 
 Максимальный размер сегмента 
 требует явного указания максимального размера сегмента  в случае если виртуальное соединение осуществляется через сегмент сети где максимальный размер блока    менее чем стандартный    байт
В протоколах туннелирования таких как  протокол  а также   туннель меньше чем стандартный поэтому сегмент  максимального размера имеет длину пакета больше чем  Это приводит к фрагментации и уменьшению скорости передачи полезных данных
Если на какомлибо узле фрагментация запрещена то со стороны пользователя это выглядит как зависание соединений При этом зависание может происходить в произвольные моменты времени а именно тогда когда отправитель использовал сегменты длиннее допустимого размера Для решения этой проблемы на маршрутизаторах применяются правила а добавляющие параметр  во все пакеты инициирующие соединения чтобы отправитель использовал сегменты допустимого размера
 может также управляться параметрами операционной системы
 Обнаружение ошибок при передаче данных 
Хотя протокол осуществляет проверку контрольной суммы по каждому сегменту используемый алгоритм считается слабым 
В общем случае распределенным сетевым приложениям рекомендуется использовать дополнительные программные средства для гарантирования целостности передаваемой информации
 Атаки на протокол 
 Атака  
Недостатки протокола проявляются в успешных теоретических и практических атаках при которых злоумышленник может получить доступ к передаваемым данным выдать себя за другую сторону или привести систему в нерабочее состояние
 Реализация 
 Псевдозаголовок 
заголовок не содержит информации об адресе отправителя и получателя поэтому даже при совпадении порта получателя нельзя с точностью сказать что сообщение пришло в нужное место Поскольку назначением протокола  является надёжная доставка сообщений то этот момент имеет принципиальное значение Эту задачу можно было решить разными способами Самый очевидный  добавить информацию об адресе назначения в заголовок  однако это вопервых приводит к дублированию информации что снижает долю полезной информации переносимой сегментом а вовторых нарушает принцип инкапсуляции модели  Поэтому разработчики протокола пошли другим путём и использовали дополнительный псевдозаголовок
псевдозаголовок 
 
 Биты 
 
  
 
  адрес отправителя  
  
 
  адрес получателя  
  
 
 
  Протокол 
  Длина сегмента  
 
псевдозаголовок 
 
 Биты 
 
  
 
  адрес отправителя  
  
 
  адрес получателя  
  
 
  Длина сегмента  
  
 
 
  Протокол верхнего уровня  
  
 
 Протокол Протокол верхнего уровня    содержит в себе значение   в двоичном виде   в шестнадцатеричном  идентификатор протокола
 Длина сегмента    содержит в себе длину сегмента в байтах заголовок  данные длина псевдозаголовка не учитывается
Псевдозаголовок не включается в сегмент Он используется для расчёта контрольной суммы перед отправлением сообщения и при его получении получатель составляет свой псевдозаголовок используя адрес хоста с которого пришло сообщение и собственный адрес а затем считает контрольную сумму
 Освобождение от расчёта контрольной суммы 
Многие реализации стека  предоставляют возможности использования аппаратной поддержки для автоматического расчёта контрольной суммы в сетевом адаптере до передачи в сеть или после приёма из сети для верификации Это может освобождать операционную систему от использования ценных тактов процессора при вычислении контрольной суммы
Эта функция может приводить к тому что анализатор трафикаанализаторы трафика перехватывающие исходящие пакеты до их передачи в сетевой адаптер и не знающие о делегировании расчёта контрольной суммы сетевому адаптеру могут сообщать об ошибке контрольной суммы в исходящих пакетах
 См также 
 
  
  
 Порт компьютерные сетиПорт 
 
 
 Литература 
 книга
автор  Терри Оглтри
заглавие  Модернизация и ремонт сетей
оригинал     
ссылка  
издание  е изд
место   М
издательство  Вильямс издательствоВильямс
год  
страницы  
  
 книга
автор  Дуглас Камер
заглавие  Сети  том  Принципы протоколы и структура
оригинал          
ссылка  
место   М
издательство  Вильямс издательствоВильямс
год  
страницы  
  
 книга
автор  Андрей Робачевский Сергей Немнюгин Ольга Стесик 
заглавие  Операционная система 
ссылка  
издание  е изд
издательство  БХВПетербург издательствоБХВПетербург
год  
страницы  
  
 Ссылки 
      
    на русском
  Спецификация протокола 
 Правилачтениятаблицописывающихструктурузаголовковсетевыхпротоколов Правила чтения таблиц описывающих структуру заголовков сетевых протоколов
Библиоинформация
КатегорияПротоколы транспортного уровня
Категория
Описание изменений
 
краткое описание вашей правки для других участников
Сохраняя изменения вы соглашаетесь с 
условиями использования
 а также соглашаетесь на безотзывную публикацию по лицензиям 
  
 и 
 Вы также соглашаетесь с тем что для атрибуции согласно условиям лицензии   достаточно будет указать гиперссылку или  страницы
Отменить
Справка по редактированию
 в новом окне
Быстрая вставка
  
подст
перенаправление 
Категория
Участник
  
 
 фильм
Теги
   
 
   
   
   
   
   
   
   
   
   
   
   
   
   
 
   
   
Теги галереи файлов
   
  
   
   
Разделы
  
   
  
   
 Итог 
   
подстСлужебные разделы
   
 См также 
   
 Примечания 
примечания
   
комментарии
   
 Литература 
   
 Ссылки 
Шаблоны
   
   
   
   
   
   
   
   
неоднозначность
   
подстдостоверность
   
  
колонкиколонкиконец
   
Внешние ссылки
   
нарушение авторских прав
   
подстредактирую
   
подстк удалению
   
подсткороткая статья
   
подстк переименованию
   
закрытозакрытоконец
   
начало цитатыконец цитатыисточник
   
перенесено с
   
перенесено на
   
   
Источники
   
 
   
  
   
 
   
   
   
подстАИ
   
подстАИ
   
подстне АИ
   
подстнет источников
   
подстнет источников в разделе
   
подстнет в источнике
Символы
Ё
ё
подстударение
Греческий алфавит
Не копируйте тексты с других сайтов 
исключения
 Материалы нарушающие 
авторские права
 будут удалены Убедитесь что ваши правки основаны на данных 
поддающихся проверке
 и 
ссылайтесь на источники
 
Правьте смело
 но для тестирования пожалуйста используйте 
песочницу
Сущности Викиданных используемые на этой странице
 Заголовок Некоторые утверждения Ссылка на сайт Описание 
Шаблоны используемые на этой странице
Шаблон
 
посмотреть исходный код
 частично защищено
Шаблон
 
править
 
Шаблон
 
править
 
Шаблон
 
посмотреть исходный код
 защищено
Шаблон
 
посмотреть исходный код
 защищено
Шаблон
 
посмотреть исходный код
 защищено
Шаблон
 
посмотреть исходный код
 защищено
Шаблон
 
посмотреть исходный код
 защищено
Шаблон
 
посмотреть исходный код
 защищено
Шаблон
 
посмотреть исходный код
 защищено
Шаблон
 
посмотреть исходный код
 защищено
Шаблон
 
посмотреть исходный код
 защищено
Шаблон 
 
посмотреть исходный код
 защищено
Шаблон
 
посмотреть исходный код
 защищено
Шаблон
 
посмотреть исходный код
 защищено
ШаблонБиблиоинформация
 
посмотреть исходный код
 защищено
ШаблонВнешние ссылки
 
посмотреть исходный код
 защищено
ШаблонИТОбщие проверки
 
посмотреть исходный код
 защищено
ШаблонКарточка
 
посмотреть исходный код
 защищено
ШаблонКарточкаВикисклад
 
посмотреть исходный код
 защищено
ШаблонКарточкавнизу
 
посмотреть исходный код
 защищено
ШаблонКарточканазвание
 
посмотреть исходный код
 защищено
ШаблонКарточка протокола
 
править
 
ШаблонКнига
 
посмотреть исходный код
 защищено
ШаблонМ
 
посмотреть исходный код
 защищено
ШаблонНавигационная таблица
 
посмотреть исходный код
 защищено
ШаблонНе переведено
 
посмотреть исходный код
 защищено
ШаблонСетевой протокол
 
править
 
ШаблонСм также
 
посмотреть исходный код
 защищено
ШаблонУказание места в библиоссылке
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль 
 
посмотреть исходный код
 защищено
Модуль 
 
посмотреть исходный код
 защищено
Модуль 
 
посмотреть исходный код
 защищено
Модуль 
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
Модуль
 
посмотреть исходный код
 защищено
МодульНе переведено
 
посмотреть исходный код
 защищено
Эта страница относится к  скрытым категориям
КатегорияПРОИТПоследняя правка в текущем году
КатегорияПРОИТСтатьи по алфавиту
КатегорияСтраницы использующие волшебные ссылки 
КатегорияСтраницы использующие волшебные ссылки 
Источник  
Навигация
Персональные инструменты
Вы не представились системе
Обсуждение
Вклад
Создать учётную запись
Войти
Пространства имён
Статья
Обсуждение
русский
Просмотры
Читать
Текущая версия
Править
Править код
История
Ещё
Поиск
Навигация
Заглавная страница
Содержание
Избранные статьи
Случайная статья
Текущие события
Пожертвовать
Участие
Сообщить об ошибке
Как править статьи
Сообщество
Форум
Справка
Свежие правки
Новые страницы
Служебные страницы
Инструменты
Ссылки сюда
Связанные правки
Сведения о странице
Получить короткий 
Скачать код
Печатьэкспорт
В других проектах
Элемент Викиданных
На других языках
Политика конфиденциальности
Описание Википедии
Отказ от ответственности
Свяжитесь с нами
Кодекс поведения
Разработчики
Статистика
Заявление о куки
Мобильная версия