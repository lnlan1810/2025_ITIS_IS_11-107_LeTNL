Википедия
Материал из Википедии  свободной энциклопедии
Текущая версия страницы пока 
не проверялась
 опытными участниками и может значительно отличаться от 
версии проверенной  октября  года
 проверки требуют 
 правок
Перейти к навигации
Перейти к поиску
У этого термина существуют и другие значения см 
 значения
Название
  
Уровень по 
модели 
Транспортный
Семейство
 иногда называют 
Создан в
Порт
 в 
Спецификация
 
  
 
Основные реализации клиенты
Ядра   
Основные реализации 
серверы
Ядра   
Расширяемость
нет
 
Медиафайлы на Викискладе
 
англ
 
  
  протокол пользовательских 
датаграмм
  один из немногих ключевых элементов набора 
сетевых протоколов
 для 
Интернета
 С  компьютерные приложения могут посылать сообщения в данном случае называемые 
датаграммами
 другим 
хостам
 по 
сети
 без необходимости предварительного сообщения для установки специальных 
каналов передачи
 или путей данных Протокол был разработан Дэвидом П Ридом в  году и официально определён в 
 
 использует простую модель передачи без явных рукопожатий для обеспечения надёжности упорядочивания или целостности данных Датаграммы могут прийти не по порядку дублироваться или вовсе исчезнуть без следа но гарантируется что если они придут то в целостном состоянии  подразумевает что проверка ошибок и исправление либо не нужны либо должны исполняться в приложении Приложения чувствительные ко времени но не чувствительные к данным часто используют  так как предпочтительнее сбросить пакеты чем ждать задержавшиеся пакеты что может оказаться невозможным в 
системах реального времени
 При необходимости исправления ошибок на сетевом уровне интерфейса приложение может задействовать 
 или 
 разработанные для этой цели
Природа  как протокола без сохранения состояния также полезна для серверов отвечающих на небольшие запросы от огромного числа клиентов например 
 и 
потоковые мультимедийные приложения
 вроде 
 
  
 
протоколы туннелирования 
 и многие 
онлайнигры
Содержание
 
Служебные порты
 
Структура пакета
 
Порт отправителя
 
Порт получателя
 
Длина датаграммы
 
Контрольная сумма
 
Расчёт контрольной суммы
 
Пример расчёта контрольной суммы
 
Псевдозаголовки
 
Псевдозаголовок для 
 
Псевдозаголовок для 
 
Надёжность и решения проблемы перегрузок
 
Приложения
 
Сравнение  и 
 
См также
 
Примечания
 
Ссылки
 
Ссылки на 
Служебные порты
править
  
править код
Основная статья 
Порт 
приложения используют 
датаграммные сокеты
 для установки соединения между хостами Приложение связывает сокет с его конечной точкой передачи данных которая является комбинацией 
адреса
 и порта службы Порт  это программная структура определяемая номером порта  
битным
 целочисленным значением то есть от  до  Порт  зарезервирован хотя и является допустимым значением порта источника в случае если процессотправитель не ожидает ответных сообщений
 разбила номера портов на три группы
Порты с номерами от  до  используются для обычных хорошо известных служб В 
подобных 
операционных системах
 для использования таких портов необходимо разрешение 
суперпользователя
Порты с номерами от  до  предназначены для зарегистрированных  служб
Порты с  по  могут быть использованы для любых целей поскольку официально не разработаны для какойто определённой службы Они также используются как 
динамические временные порты
 которые запущенное на хосте программное обеспечение может случайным образом выбрать для самоопределения По сути они используются как временные порты в основном 
клиентами
 при связи с 
серверами
Структура пакета
править
  
править код
  минимальный ориентированный на обработку сообщений протокол 
транспортного уровня
 задокументированный в 
 
 не предоставляет никаких гарантий доставки сообщения для вышестоящего протокола и не сохраняет состояния отправленных сообщений По этой причине  иногда называют    англ  Ненадёжный протокол датаграмм
 обеспечивает 
многоканальную передачу
 с помощью номеров портов и проверку целостности заголовка и существенных данных с помощью 
контрольных сумм
 Надёжная передача в случае необходимости должна реализовываться пользовательским приложением
Биты
  
  
Порт отправителя  
Порт получателя  
Длина датаграммы 
Контрольная сумма 
Данные 
Заголовок  состоит из четырёх полей каждое по  байта  бит Два из них необязательны к использованию в  розовые ячейки в таблице в то время как в  необязателен только порт отправителя
Порт отправителя
править
  
править код
В этом поле указывается номер порта отправителя Предполагается что это значение задаёт порт на который при необходимости будет посылаться ответ В противном же случае значение должно быть равным  Если хостомисточником является клиент то номер порта будет скорее всего динамическим Если источником является сервер то его порт будет одним из хорошо известных
Порт получателя
править
  
править код
Это поле обязательно и содержит порт получателя Аналогично порту отправителя если хостомполучателем является клиент то номер порта динамический если получатель  сервер то это будет хорошо известный порт
Длина датаграммы
править
  
править код
Поле задающее длину всей датаграммы заголовка и данных в байтах Минимальная длина равна длине заголовка   байт Теоретически максимальный размер поля   байт для датаграммы  байт на заголовок и  на данные Фактический предел для длины данных при использовании    помимо  байт на заголовок требуется ещё  на заголовок
На практике также следует учитывать что если длина  пакета с  будет превышать 
 для 
 по умолчанию  байт то отправка такого пакета может вызвать его фрагментацию что может привести к тому что он вообще не сможет быть доставлен если промежуточные маршрутизаторы или конечный хост не будут поддерживать фрагментированные  пакеты Также в 
 
 указывается минимальная длина  пакета  байт которую должны поддерживать все участники  и рекомендуется отправлять  пакеты большего размера только в том случае если вы уверены что принимающая сторона может принять пакеты такого размера Следовательно чтобы избежать фрагментации  пакетов и возможной их потери размер данных в  не должен превышать                   байт Для того чтобы быть уверенным что пакет будет принят любым хостом размер данных в  не должен превышать минимальная длина  пакета                  байт
В мах  пакеты  могут иметь больший размер Максимальное значение составляет     байт 
   из которых  байт соответствуют заголовку а остальные     байт  данным
Следует заметить что большинство современных сетевых устройств отправляют и принимают пакеты  длиной до  байт без их разделения на отдельные пакеты Неофициально такие пакеты называют пакетами хотя понятие  официально относится к  Тем не менее пакеты поддерживают не все устройства и перед организацией связи с помощью   посылок с длиной превышающей  байт нужно проверять возможность такой связи опытным путём на конкретном оборудовании
Контрольная сумма
править
  
править код
Поле контрольной суммы используется для проверки заголовка и данных на ошибки Если сумма не сгенерирована передатчиком то поле заполняется нулями Поле не является обязательным для 
Расчёт контрольной суммы
править
  
править код
Метод для вычисления контрольной суммы определён в  
Перед расчётом контрольной суммы если длина сообщения в байтах нечётна то сообщение дополняется в конце нулевым байтом псевдозаголовок и добавочный нулевой байт не отправляются вместе с сообщением они используются только при расчёте контрольной суммы Поле контрольной суммы в заголовке во время расчёта контрольной суммы принимается нулевым
Для расчёта контрольной суммы псевдозаголовок и сообщение разбивается на двухбайтные слова Затем рассчитывается сумма всех слов в арифметике 
обратного кода
 то есть кода в котором отрицательное число получается из положительного инверсией всех разрядов числа и существует два нуля х обозначается  и 
обозначается  Результат записывается в соответствующее поле в заголовке
Значение контрольной суммы равное х  в 
обратном коде
 зарезервировано и означает что для посылки контрольная сумма не вычислялась В случае если контрольная сумма вычислялась и получилась равной х то в поле контрольной суммы заносят значение 
 в 
обратном коде
При получении сообщения получатель считает контрольную сумму заново уже учитывая поле контрольной суммы и если в результате получится  то есть 
 то контрольная сумма считается сошедшейся Если сумма не сходится данные были повреждены при передаче либо контрольная сумма неверно посчитана на передающей стороне то решение о дальнейших действиях принимает принимающая сторона Как правило в большинстве современных устройств работающих с пакетами имеются настройки позволяющие либо игнорировать такие пакеты либо пропускать их на дальнейшую обработку невзирая на неправильность контрольной суммы
Пример расчёта контрольной суммы
править
  
править код
Для примера рассчитаем контрольную сумму нескольких битных слов 
   
Для этого можно сначала сложить попарно числа рассматривая их как разрядные беззнаковые числа с последующим приведением к дополнительному коду путём прибавления единицы к результату если при сложении произошёл перенос в старший й разряд то есть дефакто этой операцией мы переводим отрицательное число из 
дополнительного
 в 
обратный код
 Или что равноценно можно считать что перенос прибавляется к младшему разряду числа
       перенос в старший разряд
       число положительное
      
В конце выполняется инверсия всех битов получившегося числа
            
 или иначе  
    
Это и есть искомая контрольная сумма
В документе  
 приведены и другие способы расчёта контрольной суммы в частности с использованием хразрядной арифметики
Псевдозаголовки
править
  
править код
Псевдозаголовок для 
править
  
править код
Если  работает над  контрольная сумма вычисляется при помощи псевдозаголовка который содержит некоторую информацию из заголовка  Псевдозаголовок не является настоящим заголовком используемым для отправления пакета В таблице приведён псевдозаголовок используемый только для вычисления контрольной суммы
Биты
  
  
  
  
Адрес источника
Адрес получателя
Нули
Протокол
Длина 
Порт источника
Порт получателя
Длина
Контрольная сумма
Данные
Адреса источника и получателя берутся из заголовка Значения поля Протокол для  равно   Поле Длина  соответствует длине заголовка и данных
Вычисление контрольной суммы для  необязательно если она не используется то значение равно 
Псевдозаголовок для 
править
  
править код
При работе  над  контрольная сумма обязательна Метод для её вычисления был опубликован в 
 
При вычислении контрольной суммы опять используется псевдозаголовок имитирующий реальный заголовок
Биты
  
  
  
  
Адрес источника
Адрес получателя
Длина 
Нули
Следующий заголовок
Порт источника
Порт получателя
Длина
Контрольная сумма
Данные
Адрес источника такой же как и в заголовке Адрес получателя  финальный получатель если в пакете не содержится заголовка маршрутизации  то это будет адрес получателя из заголовка в противном случае на начальном узле это будет адрес последнего элемента заголовка маршрутизации а на узлеполучателе  адрес получателя из заголовка Значение Следующий заголовок равно значению протокола   для  Длина   длина заголовка и данных
Надёжность и решения проблемы перегрузок
править
  
править код
Изза недостатка надёжности приложения  должны быть готовы к некоторым потерям ошибкам и дублированиям Некоторые из них например 
 могут при необходимости добавить элементарные механизмы обеспечения надёжности на прикладном уровне
Но чаще такие механизмы не используются приложениями и даже мешают им 
Потоковые медиа
 многопользовательские игры в реальном времени и   примеры приложений часто использующих протокол  В этих конкретных приложениях потеря пакетов обычно не является большой проблемой Если приложению необходим высокий уровень надёжности то можно использовать другой протокол  или воспользоваться методами 
помехоустойчивого кодирования
 
 
англ
Более серьёзной потенциальной проблемой является то что в отличие от  основанные на  приложения не обязательно имеют хорошие механизмы контроля и избегания перегрузок Чувствительные к перегрузкам приложения которые потребляют значительную часть доступной пропускной способности могут поставить под угрозу стабильность в Интернете
Сетевые механизмы были предназначены для того чтобы свести к минимуму возможные эффекты от перегрузок при неконтролируемых высокоскоростных нагрузках Такие сетевые элементы как маршрутизаторы использующие пакетные очереди и техники сброса часто являются единственным доступным инструментом для замедления избыточного трафика 
 англ      протокол контроля за перегрузками датаграмм разработан как частичное решение этой потенциальной проблемы с помощью добавления конечному хосту механизмов для отслеживания перегрузок для высокоскоростных потоков вроде потоковых медиа
Приложения
править
  
править код
Многочисленные ключевые Интернетприложения используют  в их числе  
 где запросы должны быть быстрыми и состоять только из одного запроса за которым следует один пакет ответа Простой протокол управления сетями 
 Протокол маршрутной информации 
 Протокол динамической конфигурации узла 
Голосовой и видеотрафик обычно передаётся с помощью  Протоколы потокового видео в реальном времени и аудио разработаны для обработки случайных потерь пакетов так что качество лишь незначительно уменьшается вместо больших задержек при повторной передаче потерянных пакетов Поскольку и  и  работают с одной и той же сетью многие компании замечают что недавнее увеличение трафика изза этих приложений реального времени мешает производительности приложений вроде 
систем баз данных
 или 
бухгалтерского учёта
 Так как и бизнесприложения и приложения в реальном времени важны для компаний развитие качества решений проблемы некоторыми рассматривается в качестве важнейшего приоритета
Сравнение  и 
править
  
править код
Основная статья 
Транспортный уровень
  ориентированный на соединение протокол что означает необходимость рукопожатия для установки соединения между двумя хостами Как только соединение установлено пользователи могут отправлять данные в обоих направлениях
Надёжность
   управляет подтверждением повторной передачей и таймаутом сообщений Производятся многочисленные попытки доставить сообщение Если оно потеряется на пути сервер вновь запросит потерянную часть В  нет ни пропавших данных ни в случае многочисленных таймаутов разорванных соединений
Упорядоченность
  если два сообщения последовательно отправлены первое сообщение достигнет приложенияполучателя первым Если участки данных прибывают в неверном порядке  отправляет неупорядоченные данные в буфер до тех пор пока все данные не могут быть упорядочены и переданы приложению
Тяжеловесность
   необходимо три пакета для установки сокетсоединения перед тем как отправить данные  следит за надёжностью и перегрузками
Потоковость
  данные читаются как поток 
байтов
 не передается никаких особых обозначений для границ сообщения или сегментов
  более простой основанный на сообщениях протокол без установления соединения Протоколы такого типа не устанавливают выделенного соединения между двумя хостами Связь достигается путём передачи информации в одном направлении от источника к получателю без проверки готовности или состояния получателя В приложениях для голосовой связи через интернетпротокол      имеет преимущество над  в котором любое рукопожатие помешало бы хорошей голосовой связи В  считается что конечные пользователи в реальном времени предоставят любое необходимое подтверждение о получении сообщения
Ненадёжный
  когда сообщение посылается неизвестно достигнет ли оно своего назначения  оно может потеряться по пути Нет таких понятий как подтверждение повторная передача таймаут
Неупорядоченность
  если два сообщения отправлены одному получателю то порядок их достижения цели не может быть предугадан
Легковесность
  никакого упорядочивания сообщений никакого отслеживания соединений и т д Это небольшой транспортный уровень разработанный на 
Датаграммы
  пакеты посылаются по отдельности и проверяются на целостность только если они прибыли Пакеты имеют определённые границы которые соблюдаются после получения то есть операция чтения на сокетеполучателе выдаст сообщение целиком каким оно было изначально послано
Нет контроля перегрузок
   сам по себе не избегает перегрузок Приложения генерирующие большой трафик могут создать перегрузку сети если только они не реализуют меры контроля на прикладном уровне
См также
править
  
править код
 
Список портов  и 
Примечания
править
  
править код
 
 
 
 
         
                   
 
 
 
                  
    
 
 
 
     
 
   Расчет контрольных сумм в 
  
неопр
 сентябрь  Дата обращения  октября  
Архивировано
  октября  года
Ссылки
править
  
править код
                  
 
               
        
                  
 
    
 
          
       
 
             
           
  
Семенов Ю А
 
Протокол 
Правила чтения таблиц описывающих структуру заголовков сетевых протоколов
Ссылки на 
править
  
править код
 
  Протокол Пользовательских Датаграмм
 
  Интернет протокол спецификация версии  
 
   
 
       
 
        
Основные 
протоколы
 
 по уровням 
модели 
Физический
Канальный
 
 
 
 
 
Сетевой
Транспортный
 
 
 
Сеансовый
Представления
Прикладной
Электронная почта
Передача файлов
Удалённый доступ
Другие прикладные
 
 
Список портов  и 
Источник  
Категории
 
Интернетпротоколы
Протоколы транспортного уровня
Скрытые категории 
Википедия  не указан язык
Страницы использующие волшебные ссылки 
ВикипедияСтатьи с источниками из Викиданных
ПРОИТСтатьи по алфавиту
ПРОИТПоследняя правка в текущем году
Страницы использующие волшебные ссылки 
Навигация
Персональные инструменты
Вы не представились системе
Обсуждение
Вклад
Создать учётную запись
Войти
Пространства имён
Статья
Обсуждение
русский
Просмотры
Читать
Текущая версия
Править
Править код
История
Ещё
Поиск
Навигация
Заглавная страница
Содержание
Избранные статьи
Случайная статья
Текущие события
Пожертвовать
Участие
Сообщить об ошибке
Как править статьи
Сообщество
Форум
Справка
Свежие правки
Новые страницы
Служебные страницы
Инструменты
Ссылки сюда
Связанные правки
Постоянная ссылка
Сведения о странице
Цитировать страницу
Получить короткий 
Скачать код
Печатьэкспорт
Скачать как 
Версия для печати
В других проектах
Викисклад
Элемент Викиданных
На других языках
Беларуская
Български
 
азаша
Македонски
Монгол
 
 
 
  српскохрватски
 
Српски  
Укранська
  збекча
 
Править ссылки
 Эта страница в последний раз была отредактирована  января  в 
Текст доступен по 
лицензии   С указанием авторства  С сохранением условий  
 в отдельных случаях могут действовать дополнительные условия
Подробнее см 
Условия использования
  зарегистрированный товарный знак некоммерческой организации 
Фонд Викимедиа   
Политика конфиденциальности
Описание Википедии
Отказ от ответственности
Свяжитесь с нами
Кодекс поведения
Разработчики
Статистика
Заявление о куки
Мобильная версия